<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Github.io by mityburner</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Github.io</h1>
          <h2>browserify,前后端代码通用</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/mityburner/github.io/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/mityburner/github.io/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/mityburner/github.io" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h2>
<a name="browserify%E5%B0%86nodejs%E5%90%8E%E7%AB%AF%E7%9A%84%E4%BB%A3%E7%A0%81%E8%BF%81%E7%A7%BB%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AF" class="anchor" href="#browserify%E5%B0%86nodejs%E5%90%8E%E7%AB%AF%E7%9A%84%E4%BB%A3%E7%A0%81%E8%BF%81%E7%A7%BB%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AF"><span class="octicon octicon-link"></span></a>browserify将nodejs后端的代码迁移到浏览器端</h2>

<h3>
<a name="%E5%AE%89%E8%A3%85" class="anchor" href="#%E5%AE%89%E8%A3%85"><span class="octicon octicon-link"></span></a>安装</h3>

<p>参照：<a href="https://www.npmjs.org/package/browserify">https://www.npmjs.org/package/browserify</a></p>

<h3>
<a name="nodejs%E4%BB%A3%E7%A0%81punycodejs%E6%96%87%E4%BB%B6" class="anchor" href="#nodejs%E4%BB%A3%E7%A0%81punycodejs%E6%96%87%E4%BB%B6"><span class="octicon octicon-link"></span></a>nodejs代码(punycode.js文件)</h3>

<pre><code>var code = require('punycode');
function punycode(txt){
    var reg = /^xn--/i;
    var r = reg.test(txt)? code.toUnicode(txt):code.toASCII(txt);
    return r;
}
module.exports = punycode;
</code></pre>


<h3>
<a name="%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E7%BC%96%E8%AF%91" class="anchor" href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E7%BC%96%E8%AF%91"><span class="octicon octicon-link"></span></a>在命令行下编译</h3>

<p>browserify -r  ./punycode.js  &gt;  code.js 
之后将生成的code.js文件引入到html中。</p>

<h3>
<a name="html%E4%BB%A3%E7%A0%81" class="anchor" href="#html%E4%BB%A3%E7%A0%81"><span class="octicon octicon-link"></span></a>html代码：</h3>

<pre><code>
<input type="text" id="s">
<input type="button" value="Convert" onclick="convert()"><br/>
<span id="r"></span>
<script type="text/javascript" src="code.js"></script>
<script type="text/javascript">
function convert(){
var code = require('./punycode.js');
var s = document.getElementById('s');
var fr = code(s.value);
var r = document.getElementById('r');
var txt = document.createTextNode(fr);
r.innerText = "";
r.appendChild(txt);
}
</script>
</code></pre>

<p>
</p>
    <br>
        </section>

        <footer>
          Github.io is maintained by <a href="https://github.com/mityburner">mityburner</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
